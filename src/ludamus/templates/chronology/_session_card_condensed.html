{% load i18n %}
{% load heroicons %}
<div class="session-card-wrapper">
    <div class="session-card card rounded-2xl h-full opacity-60"
         data-title="{{ data.session.title|lower }}"
         data-host="{{ data.session.presenter_name }}"
         data-tags="{% for tag in data.tags %}{{ tag.name }}{% if not forloop.last %},{% endif %}{% endfor %}"
         data-tag-categories="{% for tag in data.tags %}{{ tag.category.name|slugify }}:{{ tag.name }}{% if not forloop.last %};{% endif %}{% endfor %}"
         data-status="{% if ended %}ended{% elif data.is_ongoing %}in-progress{% elif not data.is_enrollment_available %}unavailable{% elif data.is_full %}full{% else %}available{% endif %}"
         data-debug-ended="{{ ended|yesno:'true,false' }}"
         data-debug-is-ongoing="{{ data.is_ongoing|yesno:'true,false' }}"
         data-debug-enrollment-available="{{ data.is_enrollment_available|yesno:'true,false' }}"
         data-debug-is-full="{{ data.is_full|yesno:'true,false' }}"
         data-user-enrolled="{% if data.user_enrolled %}true{% else %}false{% endif %}"
         data-user-waiting="{% if data.user_waiting %}true{% else %}false{% endif %}"
         data-min-age="{{ data.session.min_age }}"
         data-venue="{% if data.loc.area %}{{ data.loc.venue.slug }}{% endif %}"
         style="cursor: pointer"
         onclick="openModal('sessionDetailModal{{ data.session.pk }}')">
        <div class="px-4 py-3 flex flex-col h-full">
            <!-- Title -->
            <h3 class="font-medium text-sm mb-1" style="color: var(--color-text-secondary)">{{ data.session.title }}</h3>
            <!-- Metadata -->
            <div class="text-xs mb-2" style="color: var(--color-text-muted)">
                <span class="venue-icon">
                    {{ data.session.presenter_name|default:data.session.presenter_name }}
                    {% if data.loc.space %}
                        ·
                        {% if data.loc.area %}
                            {{ data.loc.venue.name }} ›
                            {{ data.loc.area.name }} ›
                        {% endif %}
                        {{ data.loc.space.name }}
                    {% endif %}
                </span>
            </div>
            <!-- Status -->
            <div class="mt-auto flex justify-between items-center text-xs" style="color: var(--color-text-muted)">
                <span>
                    {% if ended %}
                        {% translate "Completed" %}
                    {% elif not data.is_enrollment_available %}
                        {% translate "Not Yet Available" %}
                    {% endif %}
                </span>
                <span class="flex items-center gap-1">
                    {% heroicon_mini "users" class="w-3.5 h-3.5" %}
                    {{ data.enrolled_count }}
                    {% if data.session.waiting_count > 0 %}
                        <span style="color: var(--theme-warning)">+{{ data.session.waiting_count }}</span>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</div>

{% extends "panel/base.html" %}
{% load i18n %}
{% load heroicons %}
{% block title %}
    {% translate "Event Settings" %} - Ludamus Backoffice
{% endblock title %}
{% block page_title %}
    {% translate "Event Settings" %}
{% endblock page_title %}
{% block page_subtitle %}
    {% if current_event %}
        {{ current_event.name }} Â· {% translate "Configuration" %}
    {% endif %}
{% endblock page_subtitle %}
{% block header_actions %}
    {% if current_event %}
        <div class="flex items-center space-x-3">
            <button type="button"
                    onclick="document.getElementById('settings-form').reset()"
                    class="px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 transition">
                {% translate "Cancel Changes" %}
            </button>
            <button type="submit"
                    form="settings-form"
                    class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition flex items-center">
                {% heroicon_outline "check" class="w-4 h-4 mr-2" %}
                {% translate "Save Settings" %}
            </button>
        </div>
    {% endif %}
{% endblock header_actions %}
{% block content %}
    {% if current_event %}
        <form id="settings-form"
              method="post"
              action="{% url 'panel:event-settings' slug=current_event.slug %}">
            {% csrf_token %}
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Settings -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Basic Info -->
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                        <h3 class="text-lg font-semibold text-neutral-900 mb-6">{% translate "Basic Information" %}</h3>
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-neutral-700 mb-2" for="name">{% translate "Event Name" %}</label>
                                <input type="text"
                                       name="name"
                                       id="name"
                                       value="{{ current_event.name }}"
                                       class="w-full border border-neutral-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sidebar Info -->
                <div class="space-y-6">
                    <!-- Event Status -->
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-6">
                        <h3 class="text-lg font-semibold text-neutral-900 mb-4">{% translate "Event Status" %}</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-neutral-600">{% translate "Status" %}</span>
                                {% if current_event_is_ended %}
                                    <span class="px-3 py-1 bg-neutral-100 text-neutral-700 rounded-full text-sm font-medium">{% translate "Ended" %}</span>
                                {% else %}
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">{% translate "Active" %}</span>
                                {% endif %}
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-neutral-600">{% translate "Days to Event" %}</span>
                                <span class="font-semibold text-neutral-900">{{ days_to_event|default:"-" }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-neutral-600">{% translate "Proposals" %}</span>
                                <span class="font-semibold text-neutral-900">{{ stats.pending_proposals|default:0 }} /
                                    {% if is_proposal_active %}
                                        {% translate "open" %}
                                    {% else %}
                                        {% translate "closed" %}
                                    {% endif %}
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-neutral-600">{% translate "Scheduled Sessions" %}</span>
                                <span class="font-semibold text-neutral-900">{{ stats.scheduled_sessions|default:0 }} / {{ stats.total_proposals|default:0 }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    {% else %}
        <div class="bg-white rounded-xl shadow-sm border border-neutral-100 p-8 text-center">
            <p class="text-neutral-500">{% translate "No events available. Create an event to get started." %}</p>
        </div>
    {% endif %}
{% endblock content %}
